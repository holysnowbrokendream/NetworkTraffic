# 网络流量分析系统 - 前后端分离使用说明

## 项目概述

本项目已成功实现前后端分离架构：
- **前端**: Vue3 + Element Plus + Vite
- **后端**: Django + Django REST Framework + CORS
- **通信**: RESTful API + JWT令牌认证

## 目录结构

```
NetworkTraffic/
├── Backend/NTBack/              # Django后端
│   ├── apps/
│   │   ├── Sampleapp/          # 原始模板应用
│   │   └── Transferapp/        # 新增API应用
│   ├── templates/              # HTML模板（已迁移到Vue前端）
│   └── NTBack/                 # Django配置
├── UI/                         # Vue3前端
│   ├── src/
│   │   ├── api/               # API服务层
│   │   ├── components/        # Vue组件
│   │   ├── store/            # 状态管理
│   │   └── main.js           # 入口文件
│   └── package.json
└── 前后端分离使用说明.md        # 本文件
```

## 功能对应关系

| 原HTML模板 | Vue组件 | 功能说明 |
|----------|--------|---------|
| Home.html | Home.vue | 系统首页，显示系统信息 |
| Login.html | Login.vue | 用户登录页面 |
| Signup.html | Login.vue | 用户注册（集成在登录页面） |
| Dashboard.html | Settings.vue | 用户个人中心/设置页面 |
| Traffic.html | Traffic.vue | 流量监控页面 |
| Model.html | Model.vue | 模型分析页面 |
| Settings.html | Settings.vue | 系统设置页面 |

## 启动步骤

### 1. 后端启动

```bash
# 进入后端目录
cd Backend/NTBack

# 安装依赖（如果还未安装）
pip install -r requirements.txt

# 数据库迁移
python manage.py makemigrations Transferapp
python manage.py migrate

# 启动开发服务器
python manage.py runserver
```

后端将在 `http://localhost:8000` 启动

### 2. 前端启动

```bash
# 进入前端目录
cd UI

# 安装依赖（如果还未安装）
npm install

# 启动开发服务器
npm run dev
```

前端将在 `http://localhost:5173` 启动

## API 端点

### 用户认证相关

- `POST /NTBack/api/register/` - 用户注册
- `POST /NTBack/api/login/` - 用户登录
- `GET /NTBack/api/user/` - 获取用户信息
- `PUT /NTBack/api/user/update/` - 更新用户信息

### 系统信息相关

- `GET /NTBack/api/home/` - 获取首页信息
- `GET /NTBack/api/csrf/` - 获取CSRF令牌

## 功能特性

### 1. 用户认证系统

- ✅ 用户注册：支持用户名、邮箱、手机号、密码和用户类型
- ✅ 用户登录：支持用户名/邮箱/手机号登录
- ✅ 令牌认证：使用JWT令牌进行身份验证
- ✅ 自动重定向：未登录自动跳转到登录页面
- ✅ 用户信息管理：查看和修改个人信息

### 2. 系统界面

- ✅ 现代化UI设计：采用Element Plus组件库
- ✅ 响应式布局：支持移动端和桌面端
- ✅ 侧边栏导航：便捷的页面导航
- ✅ 主题切换：支持深色/浅色模式切换

### 3. 数据交互

- ✅ CORS配置：支持跨域请求
- ✅ API拦截器：自动处理令牌和错误
- ✅ 错误处理：友好的错误提示信息
- ✅ 加载状态：显示请求加载状态

## 使用流程

### 1. 首次使用

1. 启动后端和前端服务
2. 访问 `http://localhost:5173`
3. 点击"注册"创建新账户
4. 注册成功后自动跳转到登录页面
5. 登录成功后进入系统首页

### 2. 日常使用

1. 登录后可以在首页查看系统信息
2. 点击侧边栏导航切换不同页面
3. 在设置页面管理个人信息
4. 支持自动登录状态保持

## 技术配置

### 前端配置

- **Vite配置**: 开发服务器端口5173
- **API基础URL**: `http://localhost:8000/NTBack/api`
- **路由模式**: History模式
- **状态管理**: 本地存储 + 内存状态

### 后端配置

- **CORS配置**: 允许所有域名访问（开发环境）
- **API前缀**: `/NTBack/api/`
- **认证方式**: 自定义JWT令牌
- **数据库**: MySQL（已配置）

## 开发建议

### 1. 生产环境配置

```javascript
// 修改前端 API 基础URL
const api = axios.create({
  baseURL: 'https://your-domain.com/NTBack/api',
  // ...
});
```

```python
# 修改后端 CORS 配置
CORS_ALLOWED_ORIGINS = [
    "https://your-frontend-domain.com",
]
CORS_ALLOW_ALL_ORIGINS = False
```

### 2. 安全建议

- 使用专业的JWT库（如django-rest-framework-simplejwt）
- 密码加密存储
- 配置HTTPS
- 限制API访问频率
- 添加输入验证

### 3. 功能扩展

- 添加更多用户角色和权限
- 实现文件上传功能
- 添加数据可视化图表
- 实现实时通知系统
- 添加日志记录功能

## 常见问题

### Q: 前端无法访问后端API？
A: 检查CORS配置，确保后端允许前端域名访问

### Q: 登录后刷新页面需要重新登录？
A: 检查localStorage中的token是否正确保存

### Q: 数据库连接失败？
A: 确保MySQL服务正在运行，并检查数据库配置

### Q: 前端组件显示异常？
A: 检查Element Plus是否正确引入，确保版本兼容

## 联系方式

如有问题，请联系开发团队或查看项目文档。

---

*最后更新时间：2024年12月* 