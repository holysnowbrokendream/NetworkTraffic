# 数据库迁移说明：MySQL → SQLite

## 迁移概述

本项目已成功从MySQL数据库迁移到SQLite数据库，以简化开发和部署流程。

## 迁移内容

### 1. 配置文件更新

#### HTTP/backend/settings.py
- ✅ 数据库引擎：`django.db.backends.mysql` → `django.db.backends.sqlite3`
- ✅ 数据库配置：移除MySQL特有参数，使用SQLite文件路径
- ✅ 数据库文件：`BASE_DIR / 'db.sqlite3'`

#### Backend/NTBack/NTBack/settings.py
- ✅ 数据库引擎：`django.db.backends.mysql` → `django.db.backends.sqlite3`
- ✅ 数据库配置：移除MySQL连接参数，使用SQLite文件路径
- ✅ 注释更新：移除MySQL相关说明，添加SQLite说明

### 2. 依赖文件更新

#### HTTP/requirements.txt
- ✅ 移除：`mysqlclient==2.2.7`
- ✅ 移除：`openssl==3.5.1 ; platform_system != "Windows"`

#### HTTP/environment.yml
- ✅ 注释：`mysqlclient=2.2.7`
- ✅ 注释：`openssl=3.5.1`

#### Backend/NTBack/requirements.txt
- ✅ 更新注释：说明已移除MySQL依赖，使用SQLite

### 3. 文档更新

#### README.md
- ✅ 更新：数据库支持说明（MySQL → SQLite）

#### HTTP/README.md
- ✅ 移除：MySQL安装和配置指南
- ✅ 添加：SQLite配置说明和优势介绍
- ✅ 更新：常见问题解决方案

#### 前后端分离使用说明.md
- ✅ 更新：数据库配置说明
- ✅ 更新：常见问题解答

#### Backend/README.md
- ✅ 更新：数据库配置说明

## SQLite优势

### 开发环境
- ✅ **零配置**：无需安装额外数据库服务
- ✅ **开箱即用**：Django内置支持
- ✅ **文件存储**：数据存储在单个文件中
- ✅ **便携性**：数据库文件可轻松备份和迁移

### 部署优势
- ✅ **简化部署**：无需配置数据库服务器
- ✅ **减少依赖**：降低系统复杂度
- ✅ **快速启动**：适合原型开发和测试

## 注意事项

### 1. 数据迁移
如果原项目有MySQL数据需要迁移：
```bash
# 导出MySQL数据
python manage.py dumpdata > data.json

# 导入到SQLite
python manage.py loaddata data.json
```

### 2. 性能考虑
- SQLite适合中小型应用
- 并发访问有限制（写操作互斥）
- 生产环境建议使用PostgreSQL或MySQL

### 3. 文件权限
确保Django应用对数据库文件有读写权限：
```bash
# Linux/macOS
chmod 644 db.sqlite3

# Windows
# 确保用户对文件有完全控制权限
```

## 验证迁移

### 1. 运行迁移
```bash
cd HTTP
python manage.py makemigrations
python manage.py migrate
```

### 2. 启动服务
```bash
python manage.py runserver
```

### 3. 测试功能
- 用户注册/登录
- 数据创建和查询
- API接口调用

## 回滚方案

如需恢复MySQL配置：

1. **恢复settings.py配置**
2. **安装MySQL依赖**：`pip install mysqlclient`
3. **配置MySQL服务**
4. **执行数据迁移**

---

*迁移完成时间：2025年7月* 